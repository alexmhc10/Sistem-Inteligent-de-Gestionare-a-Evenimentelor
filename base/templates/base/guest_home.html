{% extends 'main.html' %}
{% block navbar %}
{% endblock %}


{% block content %}
{% load static %}
<style>
  .glow-text {
  color: white;
  text-shadow: 
      0 0 5px #fff,
      0 0 10px #fff,
      0 0 20px #deb6b6,
      0 0 50px #b9e1db;
  font-weight: bold;
  text-align: center;
}
.event-card {
  width: 23%;
  margin: 0 10px;
  text-align: center;
}

.event-card img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
}

.event-card h5 {
  margin-top: 10px;
  font-size: 18px;
}

.event-card p {
  color: #777;
}
.glowing-card {
    border: 2px solid yellow;
    box-shadow: 0 0 15px yellow;
    transition: box-shadow 0.1s ease-in-out;
}

.glowing-card:hover {
    box-shadow: 0 0 25px yellow, 0 0 50px gold;
}

</style>
<div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
data-sidebar-position="fixed" data-header-position="fixed">
  <!-- Sidebar Start -->
  {% include 'sidebar.html' %}
  <!--  Sidebar End -->
  <!--  Main wrapper -->
  <div class="body-wrapper">
    <!--  Header Start -->
    {% include 'header.html' %}
    <!--  Header End -->
    
    <div class="container-fluid">

      <div class="title">
          <h1 class="h1">
              Welcome to your account {{ request.user.username }} !
          </h1>
      </div>
      <hr>
      
      <div class="row mt-4">
        <div class="col-lg-9 border-end">
            <div class="row">
                  {% if next_confirmed_event is not none %}
                    <div class="col-lg-8">
                            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                              <a href="#" class="alert-link">Looks like you have an Upcoming event!</a>
                              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                            <a href="{% url 'guest_event_view' next_confirmed_event.id %}">
                              <div class="card glowing-card mb-3">
                                <div class="row g-0">
                                    <div class="col-md-4 h-100">
                                      <img src="{{ MEDIA_URL }}{{ next_confirmed_event.location.gallery }}" class="img-fluid rounded-start" style="object-fit: cover;" alt="...">
                                    </div>
                                  <div class="col-md-8 h-100">
                                    <div class="card-body pb-0 pt-2">
                                      <h5 class="card-title">{{ next_confirmed_event.event_name }}</h5>
                                      <p class="card-text">{{ next_confirmed_event.event_description }}</p>
                                      <p class="card-text"><small class="text-body-secondary">Date: {{ next_confirmed_event.event_date }}</small></p>
                                      <p class="card-text">
                                        {% include 'timer.html' %}
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </a>  
                      </div>
                    {% else %}
                      <div class="col-lg-8">
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                          You have no upcoming events at the moment.
                          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                      </div>
                  {% endif %}
                  <div class="col-lg-4 mb-4">
                    
                  </div>
          
              {% if upcoming_events %}
                <div class="col-lg-12">
                  <div class="card card-hover">
                      <div class="card-body">
                          <h1 class="card-title d-flex align-items-center gap-2">
                              Checkout future events that you are invited to!
                          </h1>
                      </div>
                  </div>
                </div>
              {%endif%}

                {% if upcoming_events %}
                  {% for event in upcoming_events %}
                  <div class="col-lg-8">
                    <a href="{% url 'guest_event_view' event.id %}">
                      <div class="card mb-3">
                        <div class="row g-0">
                            <div class="col-md-4">
                              <img src="{{ MEDIA_URL }}{{ event.location.gallery }}" class="img-fluid rounded-start" style="object-fit: cover;">
                            </div>
                          <div class="col-md-8">
                            <div class="card-body">
                              <h5 class="card-title">{{ event.event_name }}</h5>
                              <p class="card-text">{{ event.event_description }}</p>
                              <p class="card-text"><small class="text-body-secondary">Date: {{ event.event_date }}</small></p>
                              <p class="card-text">
                                {% include 'timer.html' %}
                              </p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </a>  
                  </div> 
                  {% endfor %}
                {% endif %}

              </div>
        </div>
        
        <div class="col-lg-3">
          <div class="row">
            <!--<div class="d-flex justify-content-center mb-4 align-items-center">
              <div class="card">
                <div class="card-body">
                  <h1 class="card-title d-flex align-items-center gap-2">Ready to go events</h1>
                  <p>Everything its set for this event!</p>
                </div>
              </div>
                {% if next_confirmed_event %}
                <link rel="stylesheet" href="{% static 'css/output.css' %}">

                <div class="card overflow-hidden hover-img card-hover mb-3 box">
                  <div class="position-relative">
                    <a href="{% url 'guest_event_view' event.id %}">
                      <img src="{{ MEDIA_URL }}{{ event.location.gallery }}" class="card-img-top" style="max-height: 250px; object-fit: cover;" alt="matdash-img">
                    </a>
                  </div>
                  <div class="card-body p-2">
                    <h5 class="card-title">{{ event.event_name }}</h5>
                    <p class="card-text">{{ event.event_description }}</p>
                    <p class="card-text"><small class="text-body-secondary">Date: {{ event.event_date }}</small></p>
                    <p class="card-text">
                      {% include 'timer.html' %}
                    </p>
                  </div>
                </div>
                {% endif %}
                  <a href="{% url 'guest_profile' %}" class="m-0 p-0">
                    <img class="card-img rounded-circle shadow-4-strong" src="{{ MEDIA_URL }}{{profile.photo }}" style="max-height: 200px; max-width: 200px;">   
                  </a>
            </div>-->
             <div class="container h-100">
              <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col-md-12">

                  <div class="card" style="border-radius: 15px;">
                    <div class="card-body text-center">
                      <div class="mt-3 mb-4">
                        <img src="{{ MEDIA_URL }}{{profile.photo }}"
                          class="rounded-circle img-fluid" style="width: 100px;" />
                      </div>
                      <h4 class="mb-2">{{profile.username}}</h4>
                      
                      <a href="{% url 'guest_profile' %}"  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-rounded">
                        Acces Profile
                      </a>
                      <div class="d-flex justify-content-between text-center mt-2 mb-2">
                        <div>
                          <p class="mb-2 h5">{{past_events_count}}</p>
                          <p class="text-muted mb-0">Events Attended</p>
                        </div>
                        <div class="px-3">
                          <p class="mb-2 h5">0</p>
                          <p class="text-muted mb-0">Events Canceled</p>
                        </div>
                        <div>
                          <p class="mb-2 h5">{% if upcoming_events_count %}{{upcoming_events_count}}{%else%}0{%endif%}</p>
                          <p class="text-muted mb-0">Upcoming Events</p>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>

              <div class="col-lg-12">
                <div class="card">
                  <div class="card-body">
                    <h1 class="card-title d-flex align-items-center gap-2" data-bs-toggle="collapse" href="#collapseCompletedEvents" role="button" aria-expanded="true" aria-controls="collapseCompletedEvents">Completed events                      <span class="badge text-bg-primary">{{ past_events_count }}</span>
</h1>
                    <p>Share how you felt at the event with the other guests!</p>
                  </div>
                </div>
                <div class="collapse" id="collapseCompletedEvents">

                  {% if past_events %}
                  <link rel="stylesheet" href="{% static 'css/output.css' %}">
                    {% for event in past_events %}
                    <div class="card overflow-hidden hover-img card-hover mb-3 box">
                      <div class="position-relative">
                        <a href="{% url 'guest_event_view' event.id %}">
                          <img src="{{ MEDIA_URL }}{{ event.location.gallery }}" class="card-img-top" style="max-height: 250px; object-fit: cover;" alt="matdash-img">
                        </a>
                      </div>
                      <div class="card-body p-2">
                        <h5 class="card-title">{{ event.event_name }}</h5>
                        <p class="card-text">{{ event.event_description }}</p>
                        <p class="card-text"><small class="text-body-secondary">Date: {{ event.event_date }}</small></p>
                        <p class="card-text">
                          {% include 'timer.html' %}
                        </p>
                      </div>
                    </div>
                    {% endfor %}
                  {% endif %}
              </div>
            </div>  
          </div>
        </div>
      </div>  
  </div>
</div>
{% endblock %}