{% extends 'main.html' %}
{% block navbar %}
{% endblock %}

{% block content %}

<div class="container-fluid">
    <div class="row flex-nowrap">
<div class="col-auto siderbar col-md-2 forevents px-sm-1 px-0" style="flex: 0 0 12.5%; max-width: 12.5%;">
                <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100">
                    <a href="{% url 'home-admin' %}" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                        <img class="navbar-brand" style="width:100%" src="{{ MEDIA_URL }}logos/logo.jpg" alt="EventEase Logo">
                    </a>
              
                
                <hr>
                <div class="dropdown pb-4">
                    <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
                        id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="{{ request.user.profile.photo.url }}" alt="hugenerd" width="30" height="30"
                            class="rounded-circle">
                        <span class="d-none d-sm-inline mx-1">{{ request.user.username }}</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
                        <li><a class="dropdown-item" href="#">New project...</a></li>
                        <li><a class="dropdown-item" href="#">Settings</a></li>
                        <li><a class="dropdown-item" href="#">Profile</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="{% url 'logout' %}">Sign out</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col py-3 events" >

            <div class="container-fluid">
                <!-- start page title -->
                <div class="row">
                   <div class="col-12">
                      <div class="page-title-box d-sm-flex align-items-center justify-content-between bg-galaxy-transparent">
                         <h4 class="mb-sm-0">Locations</h4>
                         <div class="page-title-right">
                            <ol class="breadcrumb m-0">
                               <li class="breadcrumb-item"><a href="javascript: void(0);">EventsEase</a></li>
                               <li class="breadcrumb-item active">Locations</li>
                            </ol>
                         </div>
                      </div>
                   </div>
                </div>
                <!-- end page title -->
                <div class="card">
                   <div class="card-header border-0 rounded">
                      <div class="row g-2">
                         <div class="col-xl-3">
                            <div class="search-box">
                               <input type="text" class="form-control" autocomplete="off" id="searchResultList" placeholder="Search for owners &amp; location name or something..."> <i class="ri-search-line search-icon"></i>
                            </div>
                         </div>
                         <!--end col-->
                         <div class="col-xxl-3 ms-auto">
                            <div>
                               <div class="choices" data-type="select-one" tabindex="0" role="listbox" aria-haspopup="true" aria-expanded="false">
                                  <div class="choices__inner">
                                     <select class="form-control choices__input" id="category-select" hidden="" tabindex="-1" data-choice="active">
                                        <option value="All" selected="">Select Categories</option>
                                        <option value="All">All</option>
                                        <option value="Retailer">Retailer</option>
                                        <option value="Health &amp; Medicine">Health &amp; Medicine</option>
                                        <option value="Manufacturer">Manufacturer</option>
                                        <option value="Food Service">Food Service</option>
                                        <option value="Computers &amp; Electronics">Computers &amp; Electronics</option>
                                     </select>
                                     <div class="choices__list choices__list--single">
                                        <div class="choices__item choices__item--selectable" data-item="" data-id="1" data-value="All" aria-selected="true" role="option">Select Categories</div>
                                     </div>
                                  </div>
                                  <div class="choices__list choices__list--dropdown" aria-expanded="false">
                                     <div class="choices__list" role="listbox">
                                        <div id="choices--category-select-item-choice-6" class="choices__item choices__item--choice choices__item--selectable is-highlighted" role="option" data-choice="" data-id="6" data-value="Computers &amp; Electronics" data-select-text="Press to select" data-choice-selectable="" aria-selected="true">Computers &amp;amp; Electronics</div>
                                        <div id="choices--category-select-item-choice-5" class="choices__item choices__item--choice choices__item--selectable" role="option" data-choice="" data-id="5" data-value="Food Service" data-select-text="Press to select" data-choice-selectable="">Food Service</div>
                                        <div id="choices--category-select-item-choice-3" class="choices__item choices__item--choice choices__item--selectable" role="option" data-choice="" data-id="3" data-value="Health &amp; Medicine" data-select-text="Press to select" data-choice-selectable="">Health &amp;amp; Medicine</div>
                                        <div id="choices--category-select-item-choice-4" class="choices__item choices__item--choice choices__item--selectable" role="option" data-choice="" data-id="4" data-value="Manufacturer" data-select-text="Press to select" data-choice-selectable="">Manufacturer</div>
                                        <div id="choices--category-select-item-choice-2" class="choices__item choices__item--choice choices__item--selectable" role="option" data-choice="" data-id="2" data-value="Retailer" data-select-text="Press to select" data-choice-selectable="">Retailer</div>
                                        <div id="choices--category-select-item-choice-1" class="choices__item choices__item--choice is-selected choices__item--selectable" role="option" data-choice="" data-id="1" data-value="All" data-select-text="Press to select" data-choice-selectable="">Select Categories</div>
                                     </div>
                                  </div>
                               </div>
                            </div>
                         </div>
                         <!--end col-->
                         <div class="col-lg-auto">
                            <div class="hstack gap-2">
                               <button type="button" class="btn btn-danger"><i class="ri-equalizer-fill me-1 align-bottom"></i> Filters</button>
                               <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addSeller"><i class="ri-add-fill me-1 align-bottom"></i> Add Locations</button>
                            </div>
                         </div>
                         <!--end col-->
                      </div>
                      <!--end row-->
                   </div>
                </div>
                <div class="row mt-4" id="seller-list">
                {% for location in detailed_locations %}
                <div class="col-xl-3 col-lg-6">
                    <div class="card ribbon-box right overflow-hidden">
                       <div class="card-body text-center p-4">
                          <div class="ribbon ribbon-info ribbon-shape trending-ribbon"><i class="ri-flashlight-fill text-white align-bottom"></i> <span class="trending-ribbon-text">Trending</span></div>
                          <img src="{{ location.photo.url }}" alt="img-1.png" height="45">                
                          <h5 class="mb-1 mt-4"><a href="apps-ecommerce-seller-details.html" class="link-primary"> {{ location.name }} </a></h5>
                          <p class="text-muted mb-4"> {{ location.added_by }} </p>
                          <div class="row justify-content-center">
                             <div class="col-lg-8">
                                <div class="chart-seller8" id="chart-seller8" data-colors="[&quot;--vz-danger&quot;]" dir="ltr" style="min-height: 50px;">
                                   
                                </div>
                             </div>
                          </div>
                          <div class="row mt-4">
                             <div class="col-lg-6 border-end-dashed border-end">
                                <h5>{{ location.seats }}</h5>
                                <span class="text-muted">Max Guests</span>                    
                             </div>
                             <div class="col-lg-6">
                                <h5> {{ location.cost }}$ </h5>
                                <span class="text-muted">Location price</span>                    
                             </div>
                          </div>
                          <div class="mt-4">                    <a href="apps-ecommerce-seller-details.html" class="btn btn-light w-100">View Details</a>                </div>
                       </div>
                    </div>
                 </div>
                {% endfor %}  
                </div>
                <!--end row-->
                <div class="row align-items-center mb-4 text-center text-sm-start" id="pagination-element" style="display: flex;">
                   <div class="col-sm">
                      <div class="text-muted">
                         Showing 1 to 8 of 12 entries
                      </div>
                   </div>
                   <div class="col-sm-auto  mt-3 mt-sm-0">
                      <div class="pagination-block pagination pagination-separated justify-content-center justify-content-sm-end mb-sm-0">
                         <div class="page-item disabled">
                            <a href="javascript:void(0);" class="page-link" id="page-prev"><i class="mdi mdi-chevron-left"></i></a>
                         </div>
                         <span id="page-num" class="pagination">
                            <div class="page-item active"><a class="page-link clickPageNumber" href="javascript:void(0);">1</a></div>
                         </span>
                         <div class="page-item disabled">
                            <a href="javascript:void(0);" class="page-link" id="page-next"><i class="mdi mdi-chevron-right"></i></a>
                         </div>
                      </div>
                   </div>
                </div>
                <!-- pagination-element -->
                <div id="noresult" class="d-none">
                   <div class="text-center py-4">
                      <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop" colors="primary:#405189,secondary:#0ab39c" style="width:75px;height:75px"></lord-icon>
                      <h5 class="mt-2">Sorry! No Result Found</h5>
                      <p class="text-muted mb-0">We've searched more than 150+ sellers We did not find any sellers for you search.</p>
                   </div>
                </div>
                <!-- Modal -->
                <div class="modal fade zoomIn" id="addSeller" tabindex="-1" aria-labelledby="addSellerLabel" aria-hidden="true">
                   <div class="modal-dialog modal-dialog-centered modal-lg">
                      <div class="modal-content">
                         <div class="modal-header">
                            <h5 class="modal-title" id="addSellerLabel">Add Seller</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                         </div>
                         <div class="modal-content border-0 mt-3">
                            <ul class="nav nav-tabs nav-tabs-custom nav-success p-2 pb-0 bg-light" role="tablist">
                               <li class="nav-item" role="presentation">
                                  <a class="nav-link active" data-bs-toggle="tab" href="#personalDetails" role="tab" aria-selected="true">
                                  Personal Details
                                  </a>
                               </li>
                               <li class="nav-item" role="presentation">
                                  <a class="nav-link" data-bs-toggle="tab" href="#businessDetails" role="tab" aria-selected="false" tabindex="-1">
                                  Business Details
                                  </a>
                               </li>
                               <li class="nav-item" role="presentation">
                                  <a class="nav-link" data-bs-toggle="tab" href="#bankDetails" role="tab" aria-selected="false" tabindex="-1">
                                  Bank Details
                                  </a>
                               </li>
                            </ul>
                         </div>
                         <div class="modal-body">
                            <div class="tab-content">
                               <div class="tab-pane active" id="personalDetails" role="tabpanel">
                                  <form action="#">
                                     <div class="row">
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="firstnameInput" class="form-label">First Name</label>
                                              <input type="text" class="form-control" id="firstnameInput" placeholder="Enter your firstname">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="lastnameInput" class="form-label">Last Name</label>
                                              <input type="text" class="form-control" id="lastnameInput" placeholder="Enter your lastname">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="contactnumberInput" class="form-label">Contact Number</label>
                                              <input type="number" class="form-control" id="contactnumberInput" placeholder="Enter your number">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="phonenumberInput" class="form-label">Phone Number</label>
                                              <input type="number" class="form-control" id="phonenumberInput" placeholder="Enter your number">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="emailidInput" class="form-label">Email</label>
                                              <input type="email" class="form-control" id="emailidInput" placeholder="Enter your email">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="birthdayidInput" class="form-label">Date of Birth</label>
                                              <input type="text" id="birthdayidInput" class="form-control flatpickr-input" data-provider="flatpickr" placeholder="Enter your date of birth" readonly="readonly">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-4">
                                           <div class="mb-3">
                                              <label for="cityidInput" class="form-label">City</label>
                                              <input type="text" class="form-control" id="cityidInput" placeholder="Enter your city">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-4">
                                           <div class="mb-3">
                                              <label for="countryidInput" class="form-label">Country</label>
                                              <input type="text" class="form-control" id="countryidInput" placeholder="Enter your country">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-4">
                                           <div class="mb-3">
                                              <label for="zipcodeidInput" class="form-label">Zip Code</label>
                                              <input type="text" class="form-control" id="zipcodeidInput" placeholder="Enter your zipcode">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-12">
                                           <div class="mb-3">
                                              <label for="exampleFormControlTextarea1" class="form-label">Description</label>
                                              <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="Enter description"></textarea>
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-12">
                                           <div class="hstack gap-2 justify-content-end">
                                              <button class="btn btn-link link-success text-decoration-none fw-medium" data-bs-dismiss="modal"><i class="ri-close-line me-1 align-middle"></i> Close</button>
                                              <button type="submit" class="btn btn-primary"><i class="ri-save-3-line align-bottom me-1"></i> Save</button>
                                           </div>
                                        </div>
                                        <!--end col-->
                                     </div>
                                     <!--end row-->
                                  </form>
                               </div>
                               <div class="tab-pane" id="businessDetails" role="tabpanel">
                                  <form action="#">
                                     <div class="row">
                                        <div class="col-lg-12">
                                           <div class="mb-3">
                                              <label for="companynameInput" class="form-label">Company Name</label>
                                              <input type="text" class="form-control" id="companynameInput" placeholder="Enter your company name">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="choices-single-default" class="form-label">Company Type</label>
                                              <select class="form-control" data-trigger="" name="choices-single-default" id="choices-single-default">
                                                 <option value="">Select type</option>
                                                 <option value="All" selected="">All</option>
                                                 <option value="Merchandising">Merchandising</option>
                                                 <option value="Manufacturing">Manufacturing</option>
                                                 <option value="Partnership">Partnership</option>
                                                 <option value="Corporation">Corporation</option>
                                              </select>
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="pancardInput" class="form-label">Pan Card Number</label>
                                              <input type="text" class="form-control" id="pancardInput" placeholder="Enter your pan-card number">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-4">
                                           <div class="mb-3">
                                              <label for="websiteInput" class="form-label">Website</label>
                                              <input type="url" class="form-control" id="websiteInput" placeholder="Enter your URL">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-4">
                                           <div class="mb-3">
                                              <label for="faxInput" class="form-label">Fax</label>
                                              <input type="text" class="form-control" id="faxInput" placeholder="Enter your fax">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-4">
                                           <div class="mb-3">
                                              <label for="companyemailInput" class="form-label">Email</label>
                                              <input type="email" class="form-control" id="companyemailInput" placeholder="Enter your email">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="worknumberInput" class="form-label">Number</label>
                                              <input type="number" class="form-control" id="worknumberInput" placeholder="Enter your number">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="companylogoInput" class="form-label">Company Logo</label>
                                              <input type="file" class="form-control" id="companylogoInput">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-12">
                                           <div class="hstack gap-2 justify-content-end">
                                              <button class="btn btn-link link-success text-decoration-none fw-medium" data-bs-dismiss="modal"><i class="ri-close-line me-1 align-middle"></i> Close</button>
                                              <button type="submit" class="btn btn-primary"><i class="ri-save-3-line align-bottom me-1"></i> Save</button>
                                           </div>
                                        </div>
                                        <!--end col-->
                                     </div>
                                     <!--end row-->
                                  </form>
                               </div>
                               <div class="tab-pane" id="bankDetails" role="tabpanel">
                                  <form action="#">
                                     <div class="row">
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="banknameInput" class="form-label">Bank Name</label>
                                              <input type="text" class="form-control" id="banknameInput" placeholder="Enter your bank name">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="branchInput" class="form-label">Branch</label>
                                              <input type="text" class="form-control" id="branchInput" placeholder="Branch">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-12">
                                           <div class="mb-3">
                                              <label for="accountnameInput" class="form-label">Account Holder Name</label>
                                              <input type="text" class="form-control" id="accountnameInput" placeholder="Enter account holder name">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="accountnumberInput" class="form-label">Account Number</label>
                                              <input type="number" class="form-control" id="accountnumberInput" placeholder="Enter account number">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-6">
                                           <div class="mb-3">
                                              <label for="ifscInput" class="form-label">IFSC</label>
                                              <input type="number" class="form-control" id="ifscInput" placeholder="IFSC">
                                           </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-12">
                                           <div class="hstack gap-2 justify-content-end">
                                              <button class="btn btn-link link-success text-decoration-none fw-medium" data-bs-dismiss="modal"><i class="ri-close-line me-1 align-middle"></i> Close</button>
                                              <button type="submit" class="btn btn-primary"><i class="ri-save-3-line align-bottom me-1"></i> Save</button>
                                           </div>
                                        </div>
                                        <!--end col-->
                                     </div>
                                     <!--end row-->
                                  </form>
                               </div>
                            </div>
                         </div>
                      </div>
                   </div>
                </div>
                <!--end modal-->
             </div>
        </div>
    </div>
</div>



<style>

    .task-data{
        display:flex;
        flex-direction: column;
    }
    .task-chat{
        display:flex;
        flex-direction: row;
    }

    .equal-height {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
        background-color: #FAF9F6;
        padding: 15px;
        border: 1px solid #ECECEC;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .task-manager-container {
        margin: auto;
        width: auto;
        grid-column: 1 / 2;
        background-color: #FAF9F6;
        border: 1px solid #ECECEC;
        border-radius: 8px;
        padding: 20px;
    }

    .admin-dashboard {
        display: flex;
        flex-direction: column;
    }
    #myPlot {
        margin-right: 5vw;
    }

    table {
        width: 200px;
        border-radius: 10px;
        margin-right: auto;
    }

    table tr {
        border: none;
        outline: 1px solid #D4AF37;
        border: 1 px solid #D4AF37;
    }

    th,
    tr {
        height: 10px;
    }
</style>


<script>
    var charts = document.querySelectorAll(".chart-seller8");

    function getEventsCountByMonth(locationEvents) {
        var eventCounts = {
            'Ian': 0, 'Feb': 0, 'Mar': 0, 'Apr': 0, 'Mai': 0,
            'Iun': 0, 'Iul': 0, 'Aug': 0, 'Sep': 0, 'Oct': 0,
            'Nov': 0, 'Dec': 0
        };

        locationEvents.forEach(function(event) {
            var eventMonth = event.event_date.split('-')[1];

            var monthNames = ['Ian', 'Feb', 'Mar', 'Apr', 'Mai', 'Iun', 'Iul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var monthIndex = parseInt(eventMonth) - 1; 

            if (monthIndex >= 0 && monthIndex < monthNames.length) {
                eventCounts[monthNames[monthIndex]]++; 
            }
        });

        return Object.values(eventCounts);
    }

    charts.forEach(function(chartElement) {
        var locationEvents = []; 

        var locationEvents = [
        { event_date: '2025-01-27' },
        { event_date: '2025-01-27' },
        { event_date: '2025-01-27' },
        { event_date: '2025-01-27' },
        { event_date: '2025-03-27' }
];

        var eventData = getEventsCountByMonth(locationEvents);

        var options = {
            chart: {
                type: 'line',
                height: 200,
                background: 'transparent',  
                toolbar: {
                    show: false 
                }
            },
            series: [{
                name: 'Evenimente',
                data: eventData
            }],
            xaxis: {
                categories: ['Ian', 'Feb', 'Mar', 'Apr', 'Mai', 'Iun', 'Iul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], 
                axisBorder: {
                    show: false 
                },
                axisTicks: {
                    show: false 
                }
            },
            yaxis: {
                show: false  
            },
            grid: {
                show: false  
            },
            stroke: {
                curve: 'smooth', 
                width: 2  
            },
            markers: {
                size: 0  
            }
        };

        if (typeof chart !== 'undefined') {
            chart.destroy();
        }

        var chart = new ApexCharts(chartElement, options);
        chart.render();
    });
</script>

    
    

{% endblock content %}

{% block javascript %}
<script>
    scrollToBottom();
</script>
{% endblock javascript %}
